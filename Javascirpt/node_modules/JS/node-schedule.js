const schedule = require('node-schedule');


let scheduleObj = null;


const set = (s) => {
    const rule = new schedule.RecurrenceRule();
    rule.dayOfWeek = s.dayOfWeek; // 목, 금
    rule.hour = s.hour;
    rule.minute =s.minute;
    
    const job = schedule.scheduleJob(rule, function(){
      console.log("Scheduler has  executed");
    });


    scheduleObj = (job);
};

const cancel =  () => {
    if(scheduleObj != null){
     scheduleObj.cancel();   
    }
};


const setScheduler = (s) => {
    cancel();
    set(s);
};

const scheduleData = {
    dayOfWeek: [8, 9],
    hour: 1,
    minute: 59
};

setScheduler(scheduleData);